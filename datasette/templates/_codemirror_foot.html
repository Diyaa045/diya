<script>
    var editor = CodeMirror.fromTextArea(document.getElementsByName("sql")[0], {
      lineNumbers: true,
      mode: "text/x-sql",
      lineWrapping: true,
    });
    editor.setOption("extraKeys", {
      "Shift-Enter": function() {
        document.getElementsByClassName("sql")[0].submit();
      },
      Tab: false
    });

    var format = function() {
        editor.setValue(window.sqlFormatter.format(editor.getValue()));
        return;
    }

    var input = document.createElement('input');
    input.id = 'js-format-sql';
    input.type = 'button'
    input.value = 'Format SQL';
    input.addEventListener('click', format, false);
    document.getElementById('js-run-sql').parentNode.appendChild(input);
</script>

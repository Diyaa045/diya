<script>
    var editor = CodeMirror.fromTextArea(document.getElementsByName("sql")[0], {
      lineNumbers: true,
      mode: "text/x-sql",
      lineWrapping: true,
    });
    editor.setOption("extraKeys", {
      "Shift-Enter": function() {
        document.getElementsByClassName("sql")[0].submit();
      },
      Tab: false
    });

    var format = function() {
        editor.setValue(window.sqlFormatter.format(editor.getValue()));
        return;
    }

    document.getElementById('js-format-button').addEventListener(
        'click', format, false
    );
</script>
